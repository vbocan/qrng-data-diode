# QRNG Collector Environment Configuration

# QRNG Appliance URLs (comma-separated for multiple sources)
# 
# For the UPT Quantis Appliance, use the Swagger REST API v2.0:
# Swagger UI: https://random.cs.upt.ro/swagger/swagger-ui.html
# API Endpoint: /api/2.0/streambytes (returns JSON array of byte values)
#
# The fetcher appends "?size=<chunk_size>" to each URL automatically.
# Full request: https://random.cs.upt.ro/api/2.0/streambytes?size=1798
#
# Single source example:
#   QRNG_APPLIANCE_URLS=https://random.cs.upt.ro/api/2.0/streambytes
#
# Multiple sources example (different appliances):
#   QRNG_APPLIANCE_URLS=https://quantis1.local/api/2.0/streambytes,https://quantis2.local/api/2.0/streambytes
#
# Fake twin example (same source twice for testing):
#   QRNG_APPLIANCE_URLS=https://random.cs.upt.ro/api/2.0/streambytes,https://random.cs.upt.ro/api/2.0/streambytes
#
QRNG_APPLIANCE_URLS=https://random.cs.upt.ro/api/2.0/streambytes

# Gateway Push URL
# URL of the QRNG Gateway push endpoint
# Use container name when both are in same Docker network
QRNG_PUSH_URL=http://qrng-gateway:7764

# HMAC Secret Key (hex-encoded, 64 characters for 256-bit key)
# Generate with: openssl rand -hex 32
# MUST match the gateway's HMAC_SECRET_KEY
QRNG_HMAC_SECRET_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# Fetch Configuration
# Bytes to fetch per request (appliance returns fixed 1798 bytes)
QRNG_FETCH_CHUNK_SIZE=1798

# Fetch interval in milliseconds (100ms = 10 req/s for ~18KB/s)
# Appliance can handle ~130 req/s but use conservative rate
QRNG_FETCH_INTERVAL_MS=100

# Internal buffer size in bytes (10MB for high-throughput operation)
QRNG_BUFFER_SIZE=10485760

# Push Configuration
# Push interval in milliseconds (1000ms = 1s to match fetch rate)
# At 10 req/s fetch, pushes ~18KB/s to avoid buffer overflow
QRNG_PUSH_INTERVAL_MS=1000

# Retry Configuration
# Maximum retry attempts (default: 5)
QRNG_MAX_RETRIES=5

# Initial backoff in milliseconds (default: 100)
QRNG_INITIAL_BACKOFF_MS=100

# Logging
# Log level: trace, debug, info, warn, error (default: info)
LOG_LEVEL=info
